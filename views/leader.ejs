<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Leaderboard | Sudoku Champs</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/png" href="http://res.cloudinary.com/kunagpal/main.jpg">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/picnicss/5.1.0/plugins.min.css">
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create','UA-60481560-1','auto');ga('send','pageview');
        </script>
        <style>
            table{text-align:center;margin:10%;padding:5px;}
            body{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:15%;}
        </style>
    </head>
    <body>
        <h1>Where Goliaths stand, with the Davids not so far behind...</h1>
        <table>
            <tr><th>Rank</th><th>Legend</th><th>Score</th><th>Matches</th><th>Streak</th></tr>
        </table>
    </body>
    <script>
        var i,j,lead,tr,td,req=new XMLHttpRequest(),ref=['rank', '_id', 'points', 'played', 'streak'];
        var board=document.getElementsByTagName('table')[0];
        req.open('get','/leaderboard',true);
        req.addEventListener('load',function(){
            lead = JSON.parse(req.response);
            for(i=0;i<lead.length;++i){
                tr=document.createElement('tr');
                for(j =0;j<5;++j){
                    td=document.createElement('td');
                    tr.innerHTML=lead[i][ref[j]];
                    tr.appendChild(td);
                }
                board.appendChild(tr);
            }
        }, false);req.send();
    </script>
</html>
